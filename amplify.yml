version: 1
#env:
#  variables:
#    key: value

frontend:
  phases:
    preBuild:
      commands:
        - PREV_SHA=$(envCache --get PACKAGE_LOCK_SHA1)
        - echo "previous hash is $PREV_SHA"
        - PACKAGE_LOCK_SHA1="$(sha1sum package-lock.json)"
        - envCache --set PACKAGE_LOCK_SHA1 $PACKAGE_LOCK_SHA1
        - npm install
    build:
      commands:
        - echo "build goes here"

  artifacts:
    baseDirectory: ./dist
    files:
      - '**/*'

  cache:
    paths:
      - node_modules
#      - path

